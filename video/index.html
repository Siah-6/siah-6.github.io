<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Anime Showcase</title>

  <!-- Favicon ICO -->
  <link rel="icon" href="../images/favicon.ico" type="image/x-icon">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background-color: #0d1117;
      color: #c9d1d9;
    }

    .anime-container {
      margin: 2rem auto;
    }

    .anime-item {
      margin-bottom: 2rem;
      padding: 1rem;
      border: 1px solid #30363d;
      border-radius: 15px;
      background-color: #161b22;
    }

    .anime-item h3 {
      color: #58a6ff;
    }

    iframe {
      width: 100%;
      height: 350px;
      border: 2px solid #30363d;
      border-radius: 15px;
    }

    .details {
      margin-top: 0.5rem;
      color: #8b949e;
      font-size: 0.95rem;
    }

    .anime-item iframe,
    .anime-item video {
      width: 100%;
      height: 350px;
    }

    @media (max-width: 768px) {
      iframe {
        height: 250px;
      }
    }
  </style>
</head>

<body>
  <div class="container">
    <h1 class="text-center my-4">Anime Showcase</h1>
    <p class="text-center">Explore popular anime trailers and clips with details below each video.</p>

    <div class="row anime-container">
      <!-- Jujutsu Kaisen -->
      <div class="col-md-6">
        <div class="anime-item">
          <h3>Jujutsu Kaisen</h3>
          <video controls autoplay muted loop preload="metadata" playsinline>
            <source src="./videos/jujutsu-kaisen.mp4" type="video/mp4">
            Your browser does not support the video tag.
          </video>
          <p class="details">Jujutsu Kaisen follows Yuji Itadori as he battles curses and struggles to protect humanity.
          </p>
        </div>
      </div>

      <!-- Ragna Crimson -->
      <div class="col-md-6">
        <div class="anime-item">
          <h3>Ragna Crimson</h3>
          <video controls autoplay muted loop preload="metadata" playsinline>
            <source src="./videos/ragna-crimson.mp4" type="video/mp4">
            Your browser does not support the video tag.
          </video>
          <p class="details">Ragna Crimson dives into the intense battle between humanity and dragons, showcasing epic
            storytelling.</p>
        </div>
      </div>

      <!-- Black Clover -->
      <div class="col-md-6">
        <div class="anime-item">
          <h3>Black Clover</h3>
          <video controls autoplay muted loop preload="metadata" playsinline>
            <source src="./videos/black-clover.mp4" type="video/mp4">
            Your browser does not support the video tag.
          </video>
          <p class="details">Black Clover follows Asta and Yuno as they aim to become the Wizard King.</p>
        </div>
      </div>

      <!-- DanMachi -->
      <div class="col-md-6">
        <div class="anime-item">
          <h3>DanMachi (Is It Wrong to Try to Pick Up Girls in a Dungeon?)</h3>
          <video controls autoplay muted loop preload="metadata" playsinline>
            <source src="./videos/danmachi.mp4" type="video/mp4">
            Your browser does not support the video tag.
          </video>
          <p class="details">This anime explores the adventures of Bell Cranel as he journeys through the mysterious
            dungeons.</p>
        </div>
      </div>

      <!-- Chainsaw Man -->
      <div class="col-md-6">
        <div class="anime-item">
          <h3>Chainsaw Man</h3>
          <video controls autoplay muted loop preload="metadata" playsinline>
            <source src="./videos/chainsaw-man.mp4" type="video/mp4">
            Your browser does not support the video tag.
          </video>
          <p class="details">Chainsaw Man features Denji, who battles devils with his Chainsaw Devil powers.</p>
        </div>
      </div>

      <!-- Dandadan -->
      <div class="col-md-6">
        <div class="anime-item">
          <h3>Dandadan</h3>
          <video controls autoplay muted loop preload="metadata" playsinline>
            <source src="./videos/dandadan.mp4" type="video/mp4">
            Your browser does not support the video tag.
          </video>
          <p class="details">Dandadan features a wild mix of supernatural battles and epic adventures.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Video Optimization Script -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const videos = document.querySelectorAll('video');
      
      // Intersection Observer for lazy loading
      const videoObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            const video = entry.target;
            // Load video when visible
            video.load();
            // Try to play (will work if user has interacted with page)
            video.play().catch(e => console.log('Autoplay prevented:', e));
            videoObserver.unobserve(video);
          }
        });
      }, { threshold: 0.1 });
      
      // Observe all videos
      videos.forEach(video => {
        videoObserver.observe(video);
        
        // Add loading optimization
        video.addEventListener('loadstart', () => {
          video.style.opacity = '0.7';
        });
        
        video.addEventListener('canplay', () => {
          video.style.opacity = '1';
        });
        
        // Reduce quality for better performance if needed
        video.addEventListener('loadedmetadata', () => {
          // Optional: Set lower resolution for smoother playback
          if (video.videoWidth > 1280) {
            video.style.width = '100%';
            video.style.height = 'auto';
          }
        });
      });
      
      // Add user interaction detection for autoplay
      let userInteracted = false;
      document.addEventListener('click', () => {
        if (!userInteracted) {
          userInteracted = true;
          videos.forEach(video => {
            video.play().catch(e => console.log('Play failed:', e));
          });
        }
      }, { once: true });
    });
  </script>
</body>

</html>