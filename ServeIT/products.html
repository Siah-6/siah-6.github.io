<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ServeIT | Products</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <!-- font -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">

    <!-- animation -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />

    <!-- css -->
    <link rel="stylesheet" href="assets/css/nav/nav.css">
    <link rel="icon" href="assets/images/nav/logo-nav.png">
    <link rel="stylesheet" href="assets/css/product/product.css">
    <link rel="stylesheet" href="assets/css/footer/footer.css">

    <style>
        .active3 {
            color: #19AFA5;
        }

        body.dark-mode .active3 {
            color: #19afa5 !important;
        }
    </style>
</head>

<body>
    <div id="nav-container"></div>

    <div class="container animate__animated animate__fadeIn" style="margin-top: 30px;">
        <div class="row">
            <div class="col">
                <div class="card">
                    <div class="card-body">
                        <div class="card-title">PRODUCTS</div>
                        <p class="card-text text-center mb-3">Explore curated selections of digital products, designed
                            and created by the talented minds at ServeIT. Our products combine creativity with
                            functionality, offering innovative solutions to enhance your personal projects or business
                            ventures. Whether you need tools for productivity, design, or development, each product is
                            built to meet your needs and exceed expectations. With easy accessibility and seamless
                            integration, our digital products are perfect for anyone looking to elevate their work with
                            practical, high-quality solutions.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container mt-4 animate__animated animate__fadeIn">
        <div class="row justify-content-center align-items-center">
            <form class="row w-100 justify-content-center align-items-center" method="GET">

                <div class="col-lg-6 col-md-6 col-12 d-flex justify-content-center align-items-center pt-3">
                    <input class="search-bar form-control me-2" type="text" name="search" placeholder="Search"
                        aria-label="Search">
                </div>

                <div class="col-lg-2 col-md-4 col-4 d-flex justify-content-center align-items-center pt-3">
                    <select class="filter form-control" name="category">
                        <option value="">All</option>
                        <!-- Categories will be dynamically inserted here -->
                    </select>
                </div>

                <div class="col-lg-2 col-md-4 col-4 d-flex justify-content-center align-items-center pt-3">
                    <select id="sort" name="sort" class="sort form-control">
                        <option value="">Sort by</option>
                        <option value="title">Title</option>
                        <option value="price">Price</option>
                    </select>
                </div>
                <div class="col-lg-2 col-md-4 col-4 d-flex justify-content-center align-items-center pt-3">
                    <select id="order" name="order" class="order form-control">
                        <option value="ASC">Ascending</option>
                        <option value="DESC">Descending</option>
                    </select>
                </div>

                <div class="col-lg-6 col-md-2 col-12 d-flex justify-content-center pt-3">
                    <button type="submit" class="btnApply btn btn-primary w-100">Apply</button>
                </div>
            </form>
        </div>
    </div>

    <div class="container mt-5">
        <div class="row d-flex justify-content-center align-items-center" id="products-container">
            <!-- Products will be dynamically inserted here by JavaScript -->
        </div>
    </div>

    <div class="container py-5">
        <div class="row">
            <div class="col">
                <nav aria-label="pageNavigation">
                    <ul class="pagination">
                        <li class="page-item" onclick="previousPage()">
                            <a class="page-link" href="#" aria-label="Previous">
                                <img src="assets/images/about/prev.png" alt="Previous">
                            </a>
                        </li>
                        <li class="page-item" onclick="goToPage(1)">
                            <a class="page-link" href="#">1</a>
                        </li>
                        <li class="page-item" onclick="goToPage(2)">
                            <a class="page-link" href="#">2</a>
                        </li>
                        <li class="page-item" onclick="goToPage(3)">
                            <a class="page-link" href="#">3</a>
                        </li>
                        <li class="page-item" onclick="goToPage(4)">
                            <a class="page-link" href="#">4</a>
                        </li>
                        <li class="page-item" onclick="goToPage(5)">
                            <a class="page-link" href="#">5</a>
                        </li>
                        <li class="page-item" onclick="goToPage(6)">
                            <a class="page-link" href="#">6</a>
                        </li>
                        <li class="page-item" onclick="nextPage()">
                            <a class="page-link" href="#" aria-label="Next">
                                <img src="assets/images/about/next.png" alt="Next">
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
    </div>

    <!-- smpayment -->
    <div id="smpayment-container"></div>

    <!-- footer -->
    <div id="footer-container"></div>

    <!-- scroll animation  -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/wow/1.1.2/wow.min.js"></script>
    <script>
        new WOW({
            offset: 200,
            mobile: true,
        }).init();
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>

    <script src="js/data.js"></script>
    <script src="js/session.js"></script>
    <script>
        // Check login status - redirect to login if not authenticated
        document.addEventListener('DOMContentLoaded', function() {
            const currentUser = sessionManager.getCurrentUser();
            if (!currentUser || !currentUser.isLoggedIn) {
                window.location.href = 'login.html';
                return;
            }
            
            // Initialize page if logged in
            initializeProductsPage();
        });
        
        function initializeProductsPage() {
            loadNavigation();
            loadFooter();
            loadSMPayment();
            loadCategories();
            loadProducts();
        }
        
        // Handle See More button click with login check
        function handleProductSeeMoreClick(event, itemID) {
            event.preventDefault();
            const currentUser = sessionManager.getCurrentUser();
            
            if (currentUser && currentUser.isLoggedIn) {
                window.location.href = `productInfo.html?itemID=${itemID}`;
            } else {
                window.location.href = 'login.html';
            }
        }

        // Handle Product See More button click with login check
        function handleProductSeeMoreClick(event, itemID) {
            event.preventDefault();
            const currentUser = sessionManager.getCurrentUser();
            
            if (currentUser && currentUser.isLoggedIn) {
                window.location.href = `productInfo.html?itemID=${itemID}`;
            } else {
                window.location.href = 'login.html';
            }
        }
        
        // Load categories
        function loadCategories() {
            const categoryFilter = document.querySelector('select[name="category"]');
            const categories = getCategories('product');
            
            categoryFilter.innerHTML = '<option value="">All</option>' + 
                categories.map(category => `<option value="${category}">${category}</option>`).join('');
        }
        
        // Load products
        function loadProducts() {
            const container = document.getElementById('products-container');
            if (!container) return;
            
            const products = getProducts();
            
            container.innerHTML = products.map(product => `
                <div class="col-lg-3 col-6 d-flex flex-row justify-content-center">
                    <div class="productCard rounded mx-auto">
                        <div class="card-body d-flex flex-column justify-content-center align-items-center">
                            <div class="productImage">
                                <img src="assets/images/items/${product.attachment}"
                                    alt="${product.title}">
                            </div>
                            <div class="w-100 d-flex justify-content-between align-items-center">
                                <span class="productTitle">${product.title}</span>
                                <span class="productPrice">â‚±${product.price}</span>
                            </div>
                            <div class="w-100 d-flex justify-content-between align-items-center">
                                <p class="productDescription">${product.shortDescription}</p>
                                <a href="#" onclick="handleProductSeeMoreClick(event, ${product.itemID})">
                                    <button class="btnSeeMore rounded-pill">See More</button>
                                </a>
                            </div>
                            <div class="line" style="border-top: 2px solid black; width: 100%; margin: 10px 0;"></div>
                            <div class="category">
                                <span>${product.categoryName}</span>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }
        
        // Pagination functions (from original PHP)
        var page = 1;
        var cardsPerPage = 16;
        var totalProductCards = document.getElementsByClassName('productCard').length;
        var totalPages = Math.ceil(totalProductCards / cardsPerPage);

        function goToPage(pageNumber) {
            if (pageNumber >= 1 && pageNumber <= totalPages) {
                page = pageNumber;
                updatePage();
            }
        }

        function nextPage() {
            if (page < totalPages) {
                page++;
                updatePage();
            }
        }

        function previousPage() {
            if (page > 1) {
                page--;
                updatePage();
            }
        }

        function updatePage() {
            // Update page display logic here
            console.log('Navigating to page:', page);
        }
    </script>

</body>

</html>
                 
    </script>
    <!-- icons -->
    <script src="https://kit.fontawesome.com/d3ed67e674.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <!-- scroll animation  -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/wow/1.1.2/wow.min.js"></script>
    <script>
        new WOW({
            offset: 200,
            mobile: true,
        }).init();
    </script>
    <script src="sharedAssets/darkmode.js"></script>
    <script src="js/data.js"></script>
    <script src="js/session.js"></script>
    <script src="js/main.js"></script>

</body>

</html>
